# 假设 hex_str 就是你的 16 进制数据流（没有"0x"前缀）
hex_str = "89504e470d0a1a0a0000000d494844520000003c0000003508030000002a2d78880000000467414d410000b18f0bfc6105000000206348524d00007a26000080840000fa00000080e8000075300000ea6000003a98000017709cba513c0000024f504c5445000000ffca00ffcc00ffcc00ffcd00ffcd00ffcc00ffcf00ffcc00ffcc00ffcb00ffcd00ffbf00ffcb00ffcc00ffcc00ffcc00ffc800ffcc00ffcc00ffcc00ffc600ffcc00ffcc00ffcc00ffcf00ffcc00ffcc00ffca00ffcc00ffcc00ffcc00ffcc00ffcc00ffd100ffcc00ffcc00ffcc00ffd500ffcc00ffcd00ffce00ffc600ffcd00ffcc00ffd100ffd500ffcc00ffcc00ffcf00ffcc00ffce00ffcb00ffff00ffcb00ffcc00ffcc00ffcc00ffcb00ffcd00ffcc00ffcc00ffcd00ffcb00ffcc00ffcc00ffcc00ffcc00ffcb00ffcc00ffcd00ffcc00ffaa00ffcc00ffcc00ffcd00ffcc00ffd000ffcc00ffcd00ffcb00ffcc00ffcc00ffcb00ffcb00ffcd00ffcc00ffcd00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcb00ffcc00ffcb00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcd00ffcd00ffcc00ffcc00ffcd00ffcb00ffcc00ffcc00ffca00ffcd00ffcc00ffcc00ffcc00ffcb00ffff00ffce00ffcb00ffcc00ffcb00ffcc00ffcc00ffcd00ffcc00ffcd00ffcd00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcb00ffce00ffcc00ffcb00ffce00ffcb00ffcd00ffcc00ffcd00ffcc00ffcc00ffcc00ffcc00ffca00ffcc00ffcb00ffcd00ffcd00ffcc00ffcb00ffcd00ffcb00ffcc00ffcc00ffca00ffcd00ffcd00ffca00ffca00ffdb00ffbf00ffcd00ffc800ffcd00ffd200ffcb00ffcc00ffcc00ffcc00ffcc00ffcc00ffcc00ffcd00ffcc00ffcb00ffcd00ffcc00ffcc00ffcd00ffcc00ffcd00ffcd00ffcc00ffcd00ffcc00ffcb00ffce00ffcc00ffffff1cd06751000000c374524e53001d7eaab68e2d2588b4ad84048af9fd140e9ffb9b09bfdc2820d3ce1805b9fee81e16e0fccc0c92a2151293cf0b06c39a109143b201999787a09e5cf3e2382cfae7e9ed768660d003c46870901be4574a0af2227bb1d2c596e55a50413245f4590fd6baabdbee73c098da835180746e3575dfd1cd31021a8f9536c25f7f8165334b3c37d5d9f6eca9eb531f7258394e6bf79d19f5a5c72bc8854752af6c5b5e777c3a3d293f300708241c2e114f46e164e3796989d4cbcaae9cbba4a761b5acb0443405d715dc00000001624b4744c4140c1be10000000774494d4507e90508012e1d990848b7000003a04944415448c79596f9434c5114c72f911425d9c636a446696190b5980c1a150ac9962d293b61a2ecfb5eb6ecb2effb2e59df3fe69d73de7def2ef37e98fb43ef7bcee77cdfdc77d718935aa7ce315dbac6b208ad5b5cf7f8846eccbdf5e89968982d29a6974a927ba720e9d3d7cd9bdccfb05aff0132f10ce464d0e0c8de2143817a93e0efb0e122491d81240dfea6fb229a4702cbc81c9505cfec1c07e48e86cc985efeb1f08c8fe41de735c9f83c534d809a890e9904f1645053404dd5bd7da16bf9a9280b606ca671323d608685d85bdf0c53063335f34c78e92cd2b34117852c3207a262d225a04b55af3f686653e65a43370f6ae65350063a584e816f8119242e54cc8ba0a4824709102dce435d09ba27277d205aa24cd352482eb33f13e77439c81528ab385909d12abf645e0db9c43576bc16e26a50eb40d538bfb21ee25ac98c6babce897146933c8c65e282dde0901888378adeb9b8ac363989cdd8d92d8c6d3584b183b60d13db05f30ecc94398951f8b67ac676e2c214167415968e15ccbbb097e2306463cdee85f8582b80104c965118b6130d5e9c1af143f650bf6bf1b15724d5986ab4e3624359cdd6f01b3b9bf0b14f24fb3175c08ec7637c502c89a5ed8b9f6e1c12c9614ca5db73978ff111b1243760d82dad5c24340c5e7ed81ca51af9ec39e6988f4b207c02939ba5893a292fd8538e59d9fe387b4657e9939be492ce8ef940a4d7f28f3e8dd118b9e48c639e2f932de2409ca5927372c921c7dc2893f394bd80c1720a9ae59254c7dc10f1b52d186c32e42d4b2def22f706c232194ce94bc278199795b3a5869beb1510a625b04ba84a092935f6f5d1a49e770598be021dcac55bc828504b32b8f9aa4a5a297fd694d7485e574b6e70739c4ae2297fd394b748de564bee707349c47b89f2334966a92577b9b94d25f7283fd2945924efab2565dcdcac9236ca573833d5a2963ce0e6872a69b6ae6a531691bcab963ce2e6e92a796cd8db70bd4be72e737327953cb1808f3d75ebdc336ece5189c702cfd90b4bbdd42e5d6b710734f0cae0fb8af7c1a3d5141238ad819097c86bf6c632fbb59ab704e6e9ff452c20f28e2d23e10d692535913795d9de13f9c03e92c8d74bacf373a32bf9c45767502fb116c0679dd04566de42d639324c2ff942245b275f8964b052d761a924f2d5957c63df5d87a58e48a54eac43a69dfd701d967622fd5cc968d641e2985ef2330edb3b9dfce287cf6f12452c8a56615837ce1f125fa231db3fd89d446b34e60ebe029efcc5f62f1af335f25cf80f356144605fdbc5eb0000002574455874646174653a63726561746500323032352d30352d30385430313a34363a32392b30303a3030bd601b290000002574455874646174653a6d6f6469667900323032352d30352d30385430313a34363a32392b30303a3030cc3da3950000000049454e44ae426082"

# 将16进制字符串转换为字节数据
try:
    # 确保字符串长度为偶数
    if len(hex_str) % 2 != 0:
        hex_str = '0' + hex_str
    
    # 转换为字节数据
    image_data = bytes.fromhex(hex_str)
    
    # 保存为图片文件
    with open('recovered_image.jpg', 'wb') as f:
        f.write(image_data)
    
    print(f"图片已保存为 recovered_image.jpg，文件大小: {len(image_data)} 字节")
    
    # 验证是否为有效的JPEG文件
    if image_data[:2] == b'\xff\xd8':
        print("确认为JPEG格式")
    else:
        print("警告：可能不是有效的JPEG格式")
        
except ValueError as e:
    print(f"16进制转换错误: {e}")
except Exception as e:
    print(f"保存文件时出错: {e}")